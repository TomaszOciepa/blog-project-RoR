<% content_for :title, "Posts" %>
<div class="min-h-screen bg-gray-900 text-gray-100 p-2 font-mono">
  <h1 class="text-2xl font-bold mb-6 text-green-400 font-mono overflow-hidden whitespace-nowrap animate-typing blink">
    Witaj w "_Terminal_Retro_" blogu!<span class="animate-blink">█</span>
  </h1>
  <div id="posts" class="space-y-4">
  <%= form_with url: posts_path, method: :get, local: true, class: "mb-6" do |f| %>
  <div class="flex">
    <%= f.text_field :query, value: params[:query], placeholder: "Szukaj w tytułach i treści...",
      class: "w-full p-2 rounded-l bg-gray-800 text-green-200 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-green-400" %>

    <%= f.submit "Szukaj",
          class: "px-4 py-2 bg-gray-800 text-green-200 rounded-r hover:bg-gray-700 hover:text-green-400 transition-colors" %>
  </div>
<% end %>
<% @posts.each do |post| %>
  <div 
    class="bg-gray-800 border border-gray-700 rounded shadow-inner p-4 hover:bg-gray-700 transition-colors duration-200 cursor-pointer"
    onclick="window.location='<%= post_path(post) %>'"
  >
    <h2 class="text-xl font-bold text-cyan-400 mb-1">
      > <%= post.title %>
    </h2>

    <p class="text-gray-500 text-sm mb-2">
      [Utworzono: <%= post.created_at.strftime("%d-%m-%Y %H:%M:%S") %>]
    </p>

    <p class="text-gray-300 mb-2 line-clamp-3"><%= post.body %></p>

    <p class="text-gray-500 text-sm mb-2">
      [Autor: <%= post.user&.email || "Nieznany" %>]
    </p>


  </div>
<% end %>

  </div>
</div>
